<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <style>
    .form-control{
      width: 400px;
      box-shadow: 0px 8px 9px 0px rgba(69, 69, 69, 0.25);
    }
    .container{
      padding-left: 300px;
      padding-top: 100px;
    }
    h2{
      padding-left: 50px;
      color: chocolate;
    }
    .btn{
      margin-left: 150px;
      background-color: green;
    }
    .form-group{
      color: chocolate;
    }
    .checkbox{
      color: chocolate;
    }
  </style>
</head>
<script src="https://www.gstatic.com/firebasejs/4.2.0/firebase.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script

        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous"></script>
<script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.0/dist/jquery.validate.min.js"></script>
<body>

<div class="container">
  <h2>Create Product</h2>
  <form method="post" id="loginForm">
    <div class="form-group">
      <label for="name">Tên sản phẩm</label>
      <input type="text" class="form-control" id="name" placeholder="Enter name" name="nameCoach">
    </div>
    <div class="form-group">
      <label for="price">Giá sản phẩm</label>
      <input type="text" class="form-control" id="price" placeholder="Enter price" name="price">
    </div>
    <div class="form-group">
      <label for="quantity">Số lượng</label>
      <input type="text" class="form-control" id="quantity" placeholder="Enter quantity" name="quantity">
    </div>
    <div class="form-group">
      <label for="category">Thể loại</label>
      <input type="text" class="form-control" id="category" placeholder="Enter category" name="category">
    </div>
    <div class="form-group">
      <label for="description">Mô tả</label>
      <input type="text" class="form-control" id="description" placeholder="Enter description" name="description">
    </div>
    <div class="form-group">
      <label for="image1">Ảnh sản phẩm</label>
      <input type="file" class="form-control" id="image1">
    </div>
    <input type="hidden" class="form-control" id="image2"  name="image">

    <button type="submit" class="btn btn-default">Submit</button>
  </form>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDObAxKVnldv9c1ArB8htzZ07WZuk-tPso",
      authDomain: "nguyenthan2009-6632e.firebaseapp.com",
      projectId: "nguyenthan2009-6632e",
      storageBucket: "nguyenthan2009-6632e.appspot.com",
      messagingSenderId: "118204205848",
      appId: "1:118204205848:web:c032e8e0b6701a90082c6d",
      measurementId: "G-SVL6TCW94C"
    };
    firebase.initializeApp(firebaseConfig);
  </script>
  <script>
    var fbBucketName = 'images';

    var uploader = document.getElementById('uploader');
    var fileButton = document.getElementById('fileButton');
    var button = document.getElementById('create');

    fileButton.addEventListener('change', function (e) {

      console.log('file upload event', e);

      var file = e.target.files[0];
      var storageRef = firebase.storage().ref(`${fbBucketName}/${file.name}`);

      // upload file
      var uploadTask = storageRef.put(file);
      uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED, // or 'state_changed'
              function (snapshot) {
                switch (snapshot.state) {
                  case firebase.storage.TaskState.PAUSED: // or 'paused'
                    console.log('Upload is paused');
                    break;
                  case firebase.storage.TaskState.RUNNING: // or 'running'
                    console.log('Upload is running');
                    break;
                }
              }, function (error) {

                switch (error.code) {
                  case 'storage/unauthorized':
                    break;

                  case 'storage/canceled':
                    break;

                  case 'storage/unknown':
                    break;
                }
              }, function () {
                var downloadURL = uploadTask.snapshot.downloadURL;
                let image =  document.getElementById("avatar") ;
                image.value = downloadURL;

                // image = downloadURL;
                //    let divLocation = document.getElementById("test");
                //   let imgElement = document.createElement("input").t;
                //   imgElement.value = downloadURL
                // //  console.log('pic ==', image)
                //   divLocation.append(imgElement);
                //   imgElement.disabled;
              });

    });
    function taomoi(){
      //lay du lieu
      let name = $("#name").val();
      let image = $("#avatar").val()

      window.sessionStorage.setItem("a",name);
      let newTest = {
        name: name,
        image: image
      }
      $.ajax({
        headers:{
          'Accept': 'application/json',
          'Content-Type': 'application/json'
        },
        type:"POST",
        data:JSON.stringify(newTest),
        url:'http://localhost:8080/home',
        success: function (data){
          //  showAllClass();
        }
      })
      event.preventDefault();
    }




    </script>

</div>



</body>
</html>
